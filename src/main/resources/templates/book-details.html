<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Book Details</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">
<h1 class="mb-3" th:text="${book.title} + ' by ' + ${book.author}"></h1>
<h3>ISBN: <span th:text="${book.isbn}"></span></h3>
<img th:src="${book.imageUrl}" alt="Book Cover" id="bookCover" class="img-fluid"/>
<p id="bookSummary" class="mt-3" th:text="${book.summary}"></p>
<a href="/" class="btn btn-primary">Back to Home</a>

<script>
    // Fetch additional details from Google Books API
    document.addEventListener("DOMContentLoaded", function() {
        let isbn = document.querySelector("span[th\:text='${book.isbn}']").textContent;
        fetch(`https://www.googleapis.com/books/v1/volumes?q=isbn:${isbn}`)
            .then(response => response.json())
            .then(data => {
                if (data.items && data.items.length > 0) {
                    let bookInfo = data.items[0].volumeInfo;
                    document.getElementById("bookCover").src = bookInfo.imageLinks.thumbnail;
                    document.getElementById("bookSummary").innerText = bookInfo.description;
                }
            });
    });
</script>
</body>
</html>
